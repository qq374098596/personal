webpackJsonp([9],{Zpl8:function(e,t){},lCih:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"FuncFormBase",data:function(){return{brand:{name:"",profession:"",company:"",tel:"",time:"",jiamengshop:"",jiamengfei:"",zhiyingshop:""},imageurl:[],activeName:"first",ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},rules:{company:[{required:!0,message:"请输入公司名称",trigger:"blur"}],jiamengfei:[{required:!0,message:"请输入加盟费用，单位为：万"},{type:"number",message:"请填写数字"}],tel:[{required:!0,message:"请输入联系方式",trigger:"blur"}],time:[{required:!0,message:"请选择日期",trigger:"change"}]},fileList:[]}},created:function(){for(var e,t=this,a=document.cookie.split("; "),n=0;n<a.length;n++){var i=a[n].split("=");"api"==i[0]&&(e=i[1])}var r=unescape(unescape(e)).substring(6),s=JSON.parse(r);this.user=s;var o=s.token;this.$axios.post("api/index/islogin",{token:o}).then(function(e){var a=e.data;500==a.s?(alert(a.error),t.$router.push("/login")):t.$axios.get("api/froms/brand").then(function(e){var a=e.data.data;t.brand=a.brandInfo;for(var n=0;n<a.fileList.length;n++)t.fileList.push({url:a.fileList[n]})}).catch(function(e){})}).catch(function(e){console.log(e)})},methods:{onSubmit:function(e){console.log(e),this.$axios.post("api/froms/upBrand",{pid:this.user.pid,company:this.brand.company,joinMoney:this.brand.jiamengfei,tel:this.brand.tel,joinShop:this.brand.jiamengshop,directShop:this.brand.zhiyingshop}).then(function(e){console.log(e)})},onImgSubmit:function(){var e=this;this.$axios.post("api/froms/upImgList",{pid:this.user.pid,imglist:this.imageurl}).then(function(t){var a=t.data;500==a.s?alert(a.error):(alert(a.msg),e.$router.push("/forms/base"))})},handleChange:function(e,t){this.fileList=t.slice(-3),e.response&&this.imageurl.push(e.response.data.join(""))},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},resetForm:function(e){this.$refs[e].resetFields()},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了"+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"}？")}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"资料信息",name:"first"}},[a("el-card",{staticStyle:{width:"100%"},attrs:{shadow:"hover"}},[a("el-form",{ref:"brand",staticClass:"demo-ruleForm",attrs:{model:e.brand,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{staticStyle:{border:"none"},attrs:{label:"品牌名称",prop:"name"}},[a("el-col",{attrs:{span:11,xs:24}},[a("el-input",{attrs:{readonly:""},model:{value:e.brand.name,callback:function(t){e.$set(e.brand,"name",t)},expression:"brand.name"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌行业",prop:"profession"}},[a("el-col",{attrs:{span:11,xs:24}},[a("el-input",{attrs:{readonly:""},model:{value:e.brand.profession,callback:function(t){e.$set(e.brand,"profession",t)},expression:"brand.profession"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"公司名称",prop:"company"}},[a("el-col",{attrs:{span:11,xs:24}},[a("el-input",{model:{value:e.brand.company,callback:function(t){e.$set(e.brand,"company",t)},expression:"brand.company"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"加盟费用",prop:"jiamengfei"}},[a("el-col",{attrs:{span:11,xs:24}},[a("el-input",{attrs:{placeholder:"加盟费"},model:{value:e.brand.jiamengfei,callback:function(t){e.$set(e.brand,"jiamengfei",e._n(t))},expression:"brand.jiamengfei"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"tel"}},[a("el-col",{attrs:{span:11,xs:24}},[a("el-input",{model:{value:e.brand.tel,callback:function(t){e.$set(e.brand,"tel",e._n(t))},expression:"brand.tel"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间",prop:"date1"}},[a("el-col",{attrs:{span:11,xs:24}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.brand.time,callback:function(t){e.$set(e.brand,"time",t)},expression:"brand.time"}})],1)],1),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"加盟门店",prop:"joinShop"}},[a("el-input",{attrs:{placeholder:"加盟门店"},model:{value:e.brand.jiamengshop,callback:function(t){e.$set(e.brand,"jiamengshop",t)},expression:"brand.jiamengshop"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"直营门店",prop:"directShop"}},[a("el-input",{attrs:{placeholder:"直营门店"},model:{value:e.brand.zhiyingshop,callback:function(t){e.$set(e.brand,"zhiyingshop",t)},expression:"brand.zhiyingshop"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"上传图册",name:"second"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"api/upload/uploads","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-change":e.handleChange,"file-list":e.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px",float:"right"},attrs:{type:"primary"},on:{click:e.onImgSubmit}},[e._v("提交")])],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("Zpl8")},"data-v-59e4490c",null);t.default=r.exports}});